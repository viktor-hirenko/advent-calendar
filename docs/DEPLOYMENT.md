# Розгортання та середовище

## 1. Вимоги до інфраструктури
- **Node.js**: `^20.19.0` або `>=22.12.0`.
- **Пакетний менеджер**: npm (версія, що входить до Node).
- **Середовище виконання**: статичний хостинг (CDN, S3, CloudFront, Netlify, Vercel або власний nginx). Додатковий бекенд не потрібен.
- **Браузери**: сучасні (Chrome 110+, Safari 15+, Firefox 100+, Edge 110+).

## 2. Збірка продакшну
```bash
npm install
npm run build
```
Після успішної збірки каталог `dist/` міститиме мінімізовані файли:
- `index.html`
- `assets/*` (JS, CSS, зображення)
- webp-версії зображень (якщо `prebuild` виконав `images:webp`)

## 3. Налаштування хостингу
1. Завантажте вміст `dist/` у статичний хостинг.
2. Переконайтеся, що:
   - `Content-Type` для `.js` → `application/javascript`, `.css` → `text/css`, `.webp` → `image/webp`.
   - Вмикається `gzip`/`brotli` (або H2) для швидкого завантаження.
3. Опціонально встановіть довготривалий кеш для `assets/*` із хешами, а для `index.html` залиште коротке TTL.

## 4. Робота в iframe
- Календар задумано вбудовувати у партнерські проекти через `<iframe>`.
- Всі CTA й посилання мають `target="_parent"`, тож переходи відбуваються у батьківському вікні.
- Якщо партнеру потрібно залишати користувача в iframe, змініть логіку `TaskCard.handleButtonClick`.
- Переконайтеся, що хостинг дозволяє завантаження у `<iframe>` (заголовок `X-Frame-Options` повинен дозволяти відповідний домен).

## 5. Керування мовою та датою
- **Мова інтерфейсу**: параметр `?language=de` (повинен входити до `supportedLanguages`). Якщо не вказано, використовується `<html lang>` (браузер) → `defaultLanguage`.
- **Тестування дат**: `?testDate=2025-12-24` — дозволяє QA відкривати будь-який день без зміни системного часу.
- **Режим налагодження**: `?debug=true` — зарезервовано для майбутніх сценаріїв (компосабл повертає прапорець).

## 6. Оточення та змінні
- Проєкт не використовує `.env` файлів. Якщо виникне потреба у середовищах (dev/prod), додайте їх через стандартний механізм Vite (`VITE_*`).
- Конфігураційний JSON лежить у бандлі. Для hot-swap без перекомпіляції можна винести його на CDN і завантажувати асинхронно (потребує доопрацювання `useAppConfig`).

## 7. Інтеграція з зовнішніми системами
- **Аналітика**: додайте обробники подій безпосередньо в `CalendarContent.vue` (для кліків по днях) або `TaskCard.vue` (для кліків по кнопках), передавайте їх у ваш трекер (Google Tag Manager, власний endpoint).
- **Сторонні посилання**: `links.primary` і `task.targetUrl` можуть вести на будь-яку адресу. Переконайтеся, що вони працюють у контексті iframe.
- **Умови/Правила**: кнопка в футері відкриває модальне вікно `TermsModal` з локалізованим контентом.

## 8. Контроль якості перед релізом
1. `npm run validate-config`
2. `npm run check` + `npm run lint:styles`
3. Перевірка збірки: `npm run build`
4. Ручне тестування:
   - мови `?language=...`;
   - дати `?testDate=...` (початок, середина, кінець кампанії);
   - сценарій у реальному iframe-партнера.

## 9. Оновлення після релізу
- Для зміни контенту достатньо відредагувати `app-config.json` та перезібрати проєкт.
- Якщо зміни лише у зображеннях, запускайте `npm run images:webp` і `npm run build`.
- Слідкуйте за консольними попередженнями в релізній збірці (наприклад, розбіжність кількості задач і днів). Вони допомагають виявити помилки контенту.

Дотримання цих кроків гарантує стабільне та передбачуване розгортання календаря на будь-якій платформі.
